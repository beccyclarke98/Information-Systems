
DROP TABLE ORDER_PARTS CASCADE CONSTRAINTS;
DROP TABLE RR_ORDER CASCADE CONSTRAINTS;
DROP TABLE PARTS CASCADE CONSTRAINTS;
DROP TABLE SUPPLIER CASCADE CONSTRAINTS;
DROP TABLE RENTAL CASCADE CONSTRAINTS;
DROP TABLE BIKE CASCADE CONSTRAINTS;
DROP TABLE MANUFACTURER CASCADE CONSTRAINTS;
DROP TABLE MAINTENANCE_HISTORY CASCADE CONSTRAINTS;
DROP TABLE DEALER CASCADE CONSTRAINTS;
DROP TABLE RR_CUSTOMER CASCADE CONSTRAINTS;

CREATE TABLE RR_CUSTOMER
(
  RR_CUSTOMER_ID NUMBER(9) PRIMARY KEY NOT NULL,
  CUST_LNAME VARCHAR2(30) NOT NULL,
  CUST_FNAME VARCHAR2(30) NOT NULL,
  CUST_ADDRESS1 VARCHAR2(30) NOT NULL,
  CUST_ADDRESS2 VARCHAR2(30) ,
  CUST_TOWN VARCHAR2(30) NOT NULL,
  CUST_POSTCODE VARCHAR2(8) NOT NULL,
  CUST_TELEPHONE VARCHAR2(15) NOT NULL
  --By Lewis Frater
);

CREATE TABLE MANUFACTURER(
  MANUFACTURER_ID NUMBER(9) PRIMARY KEY NOT NULL,
  MANUFACTURER_NAME VARCHAR2(30) NOT NULL,
  MANUFACTURER_ADDRESS1 VARCHAR2(30) NOT NULL,
  MANUFACTURER_ADDRESS2 VARCHAR2(30) NOT NULL,
  MANUFACTURER_TOWN VARCHAR2(30) NOT NULL,
  MANUFACTURER_POSTCODE VARCHAR2(8) NOT NULL,
  MANUFACTURER_PHONE VARCHAR2(15) NOT NULL
);
--BY CALLUM FLANAGAN

CREATE TABLE DEALER
(
  DEALER_ID NUMBER(9) PRIMARY KEY NOT NULL,
  DEALER_NAME VARCHAR2(30) NOT NULL,
  DEALER_ADDRESS1 VARCHAR2(30) NOT NULL,
  DEALER_ADDRESS2 VARCHAR2(30) NOT NULL,
  DEALER_TOWN VARCHAR2(30) NOT NULL,
  DEALER_POSTCODE VARCHAR2(10) NOT NULL,
  DEALER_PHONE VARCHAR2(15) NOT NULL
  --By Alexander Harrison
);

CREATE TABLE BIKE
(
  BIKE_NUMBER NUMBER(9) PRIMARY KEY NOT NULL,
  MAINTENANCE_HISTORY_ID NUMBER(9) NOT NULL,
  DEALER_ID NUMBER(9) NOT NULL,
  MANUFACTURER_ID NUMBER(9) NOT NULL,
  
  BIKE_NAME VARCHAR2(15) NOT NULL,
  BIKE_TYPE  VARCHAR2(15) NOT NULL,
  BIKE_SIZE VARCHAR2(30) NOT NULL,
  
  CONSTRAINT FK_DEALER_ID FOREIGN KEY (DEALER_ID)
  REFERENCES DEALER(DEALER_ID),
  
  CONSTRAINT FK_MANUFACTURER_ID FOREIGN KEY (MANUFACTURER_ID)
  REFERENCES MANUFACTURER (MANUFACTURER_ID)
); --BY REBECCA CLARKE



CREATE TABLE MAINTENANCE_HISTORY 
(
   MAINTENANCE_HISTORY_ID NUMBER(9) PRIMARY KEY NOT NULL,
   BIKE_NUMBER NUMBER(9) NOT NULL,
   FAULT_DETAILS VARCHAR2(400) NOT NULL,
   ACTION_TAKEN VARCHAR2(400) NOT NULL,
   ACTION_DATE DATE NOT NULL,
   FAULT_DATE  DATE NOT NULL,
   
  CONSTRAINT FK_BIKE_NUMBER FOREIGN KEY (BIKE_NUMBER)
  REFERENCES BIKE(BIKE_NUMBER)

  );
--BY CALLUM FLANAGAN


CREATE TABLE RENTAL
(
  RENT_DATE DATE PRIMARY KEY NOT NULL,
  RR_CUSTOMER_ID NUMBER(9) NOT NULL,
  BIKE_NUMBER NUMBER(9) NOT NULL,
  
  AMOUNT_PAID NUMBER(30) NOT NULL,
  TIME_OUT NUMBER(9) ,
  TIME_DUEBACK NUMBER(9) ,
  TIME_ACBACK NUMBER(9) ,
  
  CONSTRAINT FK_CUST_ID_RENTAL FOREIGN KEY (RR_CUSTOMER_ID)
  REFERENCES RR_CUSTOMER(RR_CUSTOMER_ID),
  
  CONSTRAINT FK_BIKE_NUMBER_RENTAL FOREIGN KEY (BIKE_NUMBER)
  REFERENCES BIKE (BIKE_NUMBER)
  --By Lewis Frater
);

CREATE TABLE SUPPLIER
(
SUPPLIER_ID NUMBER(9) PRIMARY KEY NOT NULL,
SUPPLIER_NAME VARCHAR2(30) NOT NULL,
SUPPLIER_ADDRESS1 VARCHAR2(30) NOT NULL,
SUPPLIER_ADDRESS2 VARCHAR2(15) NOT NULL,
SUPPLIER_TOWN VARCHAR2(15) NOT NULL
);
--BY ANDREAS CHRISTOFI

CREATE TABLE PARTS
(
  PARTS_ID NUMBER(9) PRIMARY KEY NOT NULL,
  PARTS_NAME VARCHAR2(30) NOT NULL,
  PARTS_PRICE NUMBER(10) NOT NULL,
  PARTS_QTY NUMBER(4) NOT NULL
  --By Alexander Harrison
);

CREATE TABLE RR_ORDER
(
  ORDER_ID NUMBER(9) PRIMARY KEY NOT NULL,
  SUPPLIER_ID NUMBER(9) NOT NULL,
  PARTS_ID NUMBER(9) NOT NULL,

  ORDER_DATE DATE NOT NULL,
  PRICE NUMBER(15) NOT NULL,
  
  CONSTRAINT FK_PARTS_ID FOREIGN KEY (PARTS_ID)
  REFERENCES PARTS(PARTS_ID),
  
  CONSTRAINT FK_SUPPLIER_ID FOREIGN KEY (SUPPLIER_ID)
  REFERENCES SUPPLIER (SUPPLIER_ID)
);
--BY ANDREAS CHRISTOFI

CREATE TABLE ORDER_PARTS
(
  ORDER_ID NUMBER(9) NOT NULL,
  PARTS_ID NUMBER(9) NOT NULL,
  
  QTY_PARTS NUMBER(4) NOT NULL,
  
  PRIMARY KEY(ORDER_ID, PARTS_ID)
);



--LEWIS FRATER
INSERT INTO RR_CUSTOMER (RR_CUSTOMER_ID, CUST_LNAME, CUST_FNAME, CUST_ADDRESS1,
CUST_ADDRESS2, CUST_TOWN, CUST_POSTCODE, CUST_TELEPHONE)
VALUES (1, 'Stjohn', 'Donna', '248 Pleasant Hill Road', 'Salford', 'Manchester', 'M13 7FS', 01612053232);

INSERT INTO RR_CUSTOMER (RR_CUSTOMER_ID, CUST_LNAME, CUST_FNAME, CUST_ADDRESS1,
CUST_ADDRESS2, CUST_TOWN, CUST_POSTCODE, CUST_TELEPHONE)
VALUES (2, 'Gerry', 'Twock', '21 Danger Close', 'Euston', 'London', 'AB1 0AR', 02072043088);

INSERT INTO RR_CUSTOMER (RR_CUSTOMER_ID, CUST_LNAME, CUST_FNAME, CUST_ADDRESS1,
CUST_ADDRESS2, CUST_TOWN, CUST_POSTCODE, CUST_TELEPHONE)
VALUES (3, 'Ropes', 'Bailey', '12 Mary lane', 'St Helens', 'Liverpool', 'L18 4HQ', 01516673299);



--ALEXANDER HARRISON
INSERT INTO DEALER(DEALER_ID,DEALER_NAME,DEALER_ADDRESS1,DEALER_ADDRESS2,DEALER_TOWN,DEALER_POSTCODE,DEALER_PHONE)
VALUES(14,'ASH_UK','Unit 7','Holly Gate Center','Stockport','SK6 G24','07423432432432');

INSERT INTO  DEALER(DEALER_ID,DEALER_NAME,DEALER_ADDRESS1,DEALER_ADDRESS2,DEALER_TOWN,DEALER_POSTCODE,DEALER_PHONE)
VALUES(62,'GB Bikes','Unit 21', 'Gate Center','glossop','SK13 0BG','074345432432');

INSERT INTO DEALER(DEALER_ID,DEALER_NAME,DEALER_ADDRESS1,DEALER_ADDRESS2,DEALER_TOWN,DEALER_POSTCODE,DEALER_PHONE)
VALUES(92,'Bike ltd','Unit 31','Carfax court','gamesley','SK6 0BG','07454654672');



--CALLUM FLANAGAN
INSERT INTO MANUFACTURER(MANUFACTURER_ID,MANUFACTURER_NAME,MANUFACTURER_ADDRESS1,MANUFACTURER_ADDRESS2,MANUFACTURER_TOWN,MANUFACTURER_POSTCODE,MANUFACTURER_PHONE)
VALUES(1,'Bike Industry', 'Unit 9', 'Dinting Road', 'Glossop', 'SK13 7DY', '07884556767' );

INSERT INTO MANUFACTURER(MANUFACTURER_ID,MANUFACTURER_NAME,MANUFACTURER_ADDRESS1,MANUFACTURER_ADDRESS2,MANUFACTURER_TOWN,MANUFACTURER_POSTCODE,MANUFACTURER_PHONE)
VALUES(34,'Cycles Limited', ' Long Way', 'Station Road', 'Sheffield', 'JX78 9XW', '07788442323'  );

INSERT INTO MANUFACTURER(MANUFACTURER_ID,MANUFACTURER_NAME,MANUFACTURER_ADDRESS1,MANUFACTURER_ADDRESS2,MANUFACTURER_TOWN,MANUFACTURER_POSTCODE,MANUFACTURER_PHONE)
VALUES(84,'Wheels For You', ' Bridgeway', 'Green Road', 'Birmingham', 'JW45 7KL', '07547896325' );



--BY REBECCA CLARKE
INSERT INTO BIKE(BIKE_NUMBER,MAINTENANCE_HISTORY_ID,DEALER_ID,MANUFACTURER_ID,BIKE_NAME,BIKE_TYPE,BIKE_SIZE)
VALUES(1,1, 14,1, 'SlayerX','Road','LargeMale');

INSERT INTO BIKE(BIKE_NUMBER,MAINTENANCE_HISTORY_ID,DEALER_ID,MANUFACTURER_ID,BIKE_NAME,BIKE_TYPE,BIKE_SIZE)
VALUES(74,2, 62,34,'Thunder','Tamden','Child');

INSERT INTO BIKE(BIKE_NUMBER,MAINTENANCE_HISTORY_ID,DEALER_ID,MANUFACTURER_ID,BIKE_NAME,BIKE_TYPE,BIKE_SIZE)
VALUES(85,3, 92,84, 'LowRiderX','Mountain','StandardMale');



--CALLUM FLANAGAN
INSERT INTO
RENTAL(RENT_DATE ,RR_CUSTOMER_ID, BIKE_NUMBER,AMOUNT_PAID,TIME_OUT,TIME_DUEBACK,TIME_ACBACK)
VALUES('21-DEC-17', 1, 1, 40, 1310, 1625, 1800  );

INSERT INTO
RENTAL(RENT_DATE ,RR_CUSTOMER_ID, BIKE_NUMBER,AMOUNT_PAID,TIME_OUT,TIME_DUEBACK,TIME_ACBACK)
VALUES('12-MAR-17', 2, 74, 4, 1720, 1835, 1900  );

INSERT INTO
RENTAL(RENT_DATE, RR_CUSTOMER_ID, BIKE_NUMBER,AMOUNT_PAID,TIME_OUT,TIME_DUEBACK,TIME_ACBACK)
VALUES('03-AUG-17', 3, 85, 3, 1030, 1345, 1500 );




INSERT INTO ORDER_PARTS(ORDER_ID,PARTS_ID,QTY_PARTS)
VALUES(1,11,12);

INSERT INTO ORDER_PARTS(ORDER_ID,PARTS_ID,QTY_PARTS)
VALUES(82,12,30);

INSERT INTO ORDER_PARTS(ORDER_ID,PARTS_ID,QTY_PARTS)
VALUES(38,55,7);

INSERT INTO PARTS(PARTS_ID,PARTS_NAME,PARTS_PRICE,PARTS_QTY)
VALUES(11,'Bike crank',82,62);

INSERT INTO PARTS(PARTS_ID,PARTS_NAME,PARTS_PRICE,PARTS_QTY)
VALUES(12,'Pedal',5,20);

INSERT INTO PARTS(PARTS_ID,PARTS_NAME,PARTS_PRICE,PARTS_QTY)
VALUES(55,'handlebar',54,2);



--Andreas Christofi
INSERT INTO
SUPPLIER(SUPPLIER_ID,SUPPLIER_NAME, SUPPLIER_ADDRESS1, SUPPLIER_ADDRESS2, SUPPLIER_TOWN )
VALUES(45, 'Willys Wheels', '45 Stretford Rd', 'Hulme', 'Manchester');

INSERT INTO
SUPPLIER(SUPPLIER_ID,SUPPLIER_NAME, SUPPLIER_ADDRESS1, SUPPLIER_ADDRESS2, SUPPLIER_TOWN )
VALUES(34, 'Bicycle Benjamin', '31 Winstreet Rd', 'Shefwire', 'Sheffield');

INSERT INTO
SUPPLIER(SUPPLIER_ID,SUPPLIER_NAME, SUPPLIER_ADDRESS1, SUPPLIER_ADDRESS2, SUPPLIER_TOWN )
VALUES(47, 'Jezza Joes', '11 Meat Rd', 'Hulme', 'Nottingham');




INSERT INTO RR_ORDER(ORDER_ID, SUPPLIER_ID,  PARTS_ID, ORDER_DATE ,PRICE)
VALUES(433,45,11,'13-Nov-17',300);

INSERT INTO RR_ORDER(ORDER_ID, SUPPLIER_ID,  PARTS_ID, ORDER_DATE ,PRICE)
VALUES(123,34,12,'17-Oct-17',350);

INSERT INTO RR_ORDER(ORDER_ID, SUPPLIER_ID,  PARTS_ID, ORDER_DATE ,PRICE)
VALUES(244,47,55,'17-Oct-17', 375);


--CALLUM FLANAGAN
INSERT INTO
MAINTENANCE_HISTORY(MAINTENANCE_HISTORY_ID,BIKE_NUMBER,FAULT_DETAILS,ACTION_TAKEN,ACTION_DATE,FAULT_DATE)
VALUES(1,1,'Broken chain','New chain put on the bike','10-MAR-17','12-MAR-17');

INSERT INTO
MAINTENANCE_HISTORY(MAINTENANCE_HISTORY_ID,BIKE_NUMBER,FAULT_DETAILS,ACTION_TAKEN,ACTION_DATE,FAULT_DATE)
VALUES(2,74,'Flat tire','New inner tube put on the bike','17-JUN-17','18-JAN-17');

INSERT INTO
MAINTENANCE_HISTORY(MAINTENANCE_HISTORY_ID,BIKE_NUMBER,FAULT_DETAILS,ACTION_TAKEN,ACTION_DATE,FAULT_DATE)
VALUES(3, 85,'Brakes need bleeding','Brakes have had new brake fluid in them','11-DEC-17','12-AUG-17');














--Lewis Frater
--Describes the table RR_CUSTOMER, for column names, types of data and constraints etc
DESCRIBE RR_CUSTOMER;

--LEWIS FRATER
SELECT CUST_FNAME, CUST_LNAME , CUST_ADDRESS1 , CUST_ADDRESS2, CUST_TOWN,CUST_POSTCODE
FROM RR_CUSTOMER;


--LEWIS FRATER
--Order by ascending order
SELECT * FROM BIKE
ORDER BY BIKE_NUMBER ASC;

--LEWIS FRATER
--COMPARISON OF PARTS PRICE
SELECT PARTS_PRICE FROM PARTS
WHERE PARTS_PRICE >= 50;

--REBECCA
SELECT PARTS_ID, PARTS_QTY 
FROM PARTS
WHERE PARTS_QTY > 0;

--REBECCA
-- ALL PARTS IN STOCK
SELECT PARTS_ID "Parts ID", PARTS_QTY "Stock"
FROM PARTS
WHERE PARTS_QTY > 0;



--REBECCA 
-- PART PRICE LESS THAN 150
SELECT PARTS_ID, PARTS_NAME "PartN", PARTS_PRICE "Price"
FROM PARTS
WHERE PARTS_PRICE < 150
ORDER BY PARTS_ID ASC;

--Group Function
--Andreas Christofi
SELECT Order_ID
FROM  RR_ORDER
WHERE Order_ID > 5
GROUP BY ORDER_ID;

Select RR_CUSTOMER_ID, CUST_FNAME ,CUST_LNAME, CUST_TELEPHONE FROM RR_CUSTOMER;
--Alexander Harrison

 Select * FROM BIKE;
--Alexander Harrison

SELECT* FROM MANUFACTURER;
-- CALLUM FLANAGAN

SELECT * FROM DEALER;
--callum flanagan

SELECT* FROM RENTAL;
--Alexander Harrison


--NATURAL JOIN OF 2 TABLES
SELECT RR_CUSTOMER_ID, CUST_FNAME , CUST_LNAME 
FROM RR_CUSTOMER NATURAL JOIN RR_ORDER
WHERE ORDER_ID = 123 ;
-- RC, AC

--NATURAL JOIN OF 3 TABLES
SELECT BIKE_NUMBER AS BIKE_ID, DEALER_ID, MANUFACTURER_ID
FROM BIKE JOIN DEALER USING (DEALER_ID) JOIN MANUFACTURER USING(MANUFACTURER_ID);
-- REBECCA CLARKE



-- LIKE STATEMENT
SELECT BIKE_NUMBER "BIKE NO",DEALER_ID,BIKE_NAME "NAME",BIKE_TYPE "TYPE",BIKE_SIZE "SIZE"
FROM BIKE
WHERE BIKE_NAME LIKE 'SlayerX';
-- REBECCA CLARKE

-- BETWEEN STATEMENT
SELECT *
FROM RR_ORDER
WHERE PRICE BETWEEN 300 AND 360;
-- REBECCA CLARKE

-- NOT LIKE STATEMENT
SELECT *
FROM RR_CUSTOMER
WHERE CUST_TOWN NOT LIKE 'Manchester';
-- REBECCA CLARKE

-- + STATEMENT
SELECT PARTS_PRICE "ORIGINAL", PARTS_PRICE + 130 "PRICE +130"
FROM PARTS;
-- REBECCA CLARKE

-- MULTIPLY STATEMENT
SELECT PARTS_PRICE "ORIGINAL", PARTS_PRICE * 30 "PRICE *30"
FROM PARTS;
-- REBECCA CLARKE

-- MINUS STATEMENT
SELECT PARTS_PRICE "ORIGINAL", PARTS_PRICE -5 "PRICE -5"
FROM PARTS;
-- REBECCA CLARKE

-- SYS DATE STATEMENT
SELECT RENT_DATE "RENT DATE" , RR_CUSTOMER_ID "CUSTOMER ID" ,BIKE_NUMBER "BIKE ID", AMOUNT_PAID "PAID" ,TIME_OUT "TIME OUT", TIME_DUEBACK "TIME DUE BACK", TIME_ACBACK "TIME BACK", SYSDATE "TODAYS DATE
"FROM RENTAL;
-- REBECCA CLARKE

--PRINT SCREENS OF TABLES

SELECT *
FROM RR_CUSTOMER;

SELECT *
FROM MANUFACTURER;

SELECT *
FROM DEALER;

SELECT *
FROM BIKE;

SELECT *
FROM MAINTENANCE_HISTORY;

SELECT *
FROM RENTAL;

SELECT *
FROM SUPPLIER;

SELECT *
FROM PARTS;

SELECT *
FROM RR_ORDER;

SELECT *
FROM ORDER_PARTS;